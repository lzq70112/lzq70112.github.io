(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{613:function(e,t,s){"use strict";s.r(t);var a=s(20),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"_1、kubelet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、kubelet"}},[e._v("#")]),e._v(" 1、kubelet")]),e._v(" "),s("p",[e._v("kublet负责master和节点（node）之间的通信、交互和数据上报 到master的apiserver")]),e._v(" "),s("h3",{attrs:{id:"_1-1、作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、作用"}},[e._v("#")]),e._v(" 1.1、作用")]),e._v(" "),s("p",[e._v("整体来讲 的职责是")]),e._v(" "),s("p",[e._v("1、Node管理")]),e._v(" "),s("p",[e._v("2、pod管理")]),e._v(" "),s("p",[e._v("3、容器健康检查")]),e._v(" "),s("p",[e._v("4、容器监控")]),e._v(" "),s("p",[e._v("5、资源清理")]),e._v(" "),s("p",[e._v("6、和容器运行时交互(docker 、rkt、Virtlet等等)")]),e._v(" "),s("h3",{attrs:{id:"_1-2、常用的接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、常用的接口"}},[e._v("#")]),e._v(" 1.2、常用的接口")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("/pods\n/stats/summary\n/metrics\n/metrics/cadvisor\n/healthz\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("h3",{attrs:{id:"_1-3、测试访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、测试访问"}},[e._v("#")]),e._v(" 1.3、测试访问")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" -it kubelet "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -k https://localhost:10250/healthz  --header "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Authorization: Bearer kubeconfig-user-wzpnvrb6gq:hmt5qhrcbfctrpsbfc4qbkjcn8864xxg2t9jq6lm7tw4vkb9xmvh2c"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#config中获取证书")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 或者")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -s --cacert /etc/kubernetes/pki/ca.key --cert /etc/kubernetes/pki/apiserver-kubelet-client.crt --key /etc/kubernetes/pki/apiserver-kubelet-client.key https://localhost:10250/metrics/cadvisor --insecure "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#节点采集信息")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("h2",{attrs:{id:"_2-kube-proxy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-kube-proxy"}},[e._v("#")]),e._v(" 2.kube-proxy")]),e._v(" "),s("h3",{attrs:{id:"_2-1、作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、作用"}},[e._v("#")]),e._v(" 2.1、作用")]),e._v(" "),s("p",[e._v("外部通过NodePort、ClusterIP等方式访问服务。")]),e._v(" "),s("p",[e._v("kube-proxy 运行在每个Node 上，负责Pod网络代理,  维护网络规则和四层负载均衡工作")]),e._v(" "),s("h3",{attrs:{id:"_2-2、模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、模式"}},[e._v("#")]),e._v(" 2.2、模式")]),e._v(" "),s("p",[e._v("默认模式:UserSpace(已废弃)、iptables、ipvs")]),e._v(" "),s("h2",{attrs:{id:"_3、kube-controller-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、kube-controller-manager"}},[e._v("#")]),e._v(" 3、kube-controller-manager")]),e._v(" "),s("p",[e._v("在master中。\nkube-controller-manager负责节点管理、pod复制和endpoint创建.\n监控集群中各种资源的状态使之和定义的状态保持一致,.")]),e._v(" "),s("p",[e._v("如:\n节点控制器（Node Controller）: 负责在节点出现故障时进行通知和响应。")]),e._v(" "),s("p",[e._v("副本控制器（Replication Controller）: 负责为系统中的每个副本控制器对象维护正\n确数量的 Pod。(现在是Deployment Controller+Replication Set)")])])}),[],!1,null,null,null);t.default=r.exports}}]);