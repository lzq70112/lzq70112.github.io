(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{659:function(s,a,t){"use strict";t.r(a);var r=t(20),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("harbor安装https\n")]),s._v(" "),t("h2",{attrs:{id:"_1、安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装docker"}},[s._v("#")]),s._v(" 1、安装docker")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" apt-transport-https ca-certificates "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" software-properties-common\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# step 2: 安装GPG证书")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Step 3: 写入软件源信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" add-apt-repository "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu '),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -cs"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' stable"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Step 4: 更新并安装 Docker-CE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" -y update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":18.09.9~3-0~ubuntu-xenial docker-ce-cli"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":18.09.9~3-0~ubuntu-xenial\n\nsystemctl start "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"_2、安装harbor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装harbor"}},[s._v("#")]),s._v(" 2、安装harbor")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\nmkdir /usr/local/src -p\ncd /usr/local/src/\ntar -xvf harbor-offline-installer-v1.7.8.tgz  \ncd harbor/\nvi harbor.cfg #修改配置\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("_version "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v(".0\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" my.harbor.com\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#域名")]),s._v("\nui_url_protocol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" https\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#协议")]),s._v("\nmax_job_workers "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" \ncustomize_crt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" on\nssl_cert "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /data/cert/my.crt\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#证书")]),s._v("\nssl_cert_key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /data/cert/my.key\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密钥")]),s._v("\nsecretkey_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /data\nadmiral_url "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NA\nlog_rotate_count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\nlog_rotate_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 200M\nhttp_proxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nhttps_proxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nno_proxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,localhost,core,registry\nemail_identity "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" \nemail_server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" smtp.mydomain.com\nemail_server_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\nemail_username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sample_admin@mydomain.com\nemail_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abc\nemail_from "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("sample_admin@mydomain.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nemail_ssl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nemail_insecure "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nharbor_admin_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Harbor12345\nauth_mode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" db_auth\nldap_url "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ldaps://ldap.mydomain.com\nldap_basedn "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ou")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("people,dc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mydomain,dc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com\nldap_uid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" uid \nldap_scope "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" \nldap_timeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nldap_verify_cert "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nldap_group_basedn "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ou")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("group,dc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mydomain,dc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com\nldap_group_filter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("objectclass")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("group\nldap_group_gid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cn\nldap_group_scope "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nself_registration "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" on\ntoken_expiration "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\nproject_creation_restriction "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" everyone\ndb_host "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" postgresql\ndb_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" root123\ndb_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5432")]),s._v("\ndb_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" postgres\nredis_host "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" redis\nredis_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\nredis_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" \nredis_db_index "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1,2")]),s._v(",3\nclair_db_host "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" postgresql\nclair_db_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" root123\nclair_db_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5432")]),s._v("\nclair_db_username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" postgres\nclair_db "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" postgres\nclair_updaters_interval "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\nuaa_endpoint "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" uaa.mydomain.org\nuaa_clientid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\nuaa_clientsecret "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" secret\nuaa_verify_cert "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nuaa_ca_cert "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /path/to/ca.pem\nregistry_storage_provider_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" filesystem\nregistry_storage_provider_config "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nregistry_custom_ca_bundle "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" -version\n./install.sh  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_3、生成密钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、生成密钥"}},[s._v("#")]),s._v(" 3、生成密钥")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data/cert/ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /data/cert/\nopenssl req  -newkey rsa:4096 -nodes -sha256 -keyout ca.key -x509 -days "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("365")]),s._v(" -out ca.crt\nopenssl req  -newkey rsa:4096 -nodes -sha256 -keyout my.key -out my.csr\nopenssl x509 -req -days "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("365")]),s._v(" -in my.csr -CA ca.crt -CAkey ca.key -CAcreateserial  -out my.crt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"_4、测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、测试"}},[s._v("#")]),s._v(" 4、测试")]),s._v(" "),t("p",[t("code",[s._v("docker login my.harbor.com")]),s._v(" #无法正常登陆")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Error response from daemon: Get https://my.harbor.com/v2/: x509: certificate signed by unknown authority\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("https只需要添加证书不需要，添加非安全仓库")]),s._v(" "),t("p",[t("code",[s._v("scp my.crt master-1:/etc/docker/certs.d/my.harbor.com/harbor-ca.crt")]),s._v(" # 路径格式必须队应域名")]),s._v(" "),t("p",[t("code",[s._v("docker login my.harbor.com")]),s._v(" #测试")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("https://docs.docker.com/engine/reference/commandline/login/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#credentials-store")]),s._v("\n\nLogin Succeeded\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);