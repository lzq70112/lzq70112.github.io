(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{580:function(s,t,a){"use strict";a.r(t);var r=a(20),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1、问题概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、问题概述"}},[s._v("#")]),s._v(" 1、问题概述")]),s._v(" "),a("p",[s._v("有时候K8S需要临时测试访问，又不想ingress，又不想nodeport，快速的方法")]),s._v(" "),a("p",[a("code",[s._v("kubectl get svc -n monitoring")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("NAME                    TYPE        CLUSTER-IP      EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                      AGE\nalertmanager-main       ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.68")]),s._v(".196.76    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9093")]),s._v("/TCP                     28m\nalertmanager-operated   ClusterIP   None            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9093")]),s._v("/TCP,9094/TCP,9094/UDP   28m\ngrafana                 ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.68")]),s._v(".155.167   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("/TCP                     28m\nkube-state-metrics      ClusterIP   None            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v("/TCP,9443/TCP            28m\nnode-exporter           ClusterIP   None            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9100")]),s._v("/TCP                     28m\nprometheus-adapter      ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.68")]),s._v(".239.95    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP                      28m\nprometheus-k8s          ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.68")]),s._v(".161.36    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("/TCP                     28m\nprometheus-operated     ClusterIP   None            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("/TCP                     28m\nprometheus-operator     ClusterIP   None            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v("/TCP                     32m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"_2、port-forward"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、port-forward"}},[s._v("#")]),s._v(" 2、port-forward")]),s._v(" "),a("p",[s._v("port-forward 完美解决问题，")]),s._v(" "),a("p",[a("code",[s._v("kubectl --namespace monitoring port-forward svc/prometheus-k8s 9090")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Forwarding from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:9090 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("\nForwarding from "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":9090 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("执行后会在本机生成对应端口，暴露服务端口")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/lzq70112/images/blog/image-20211005094842667.png",alt:"image-20211005094842667"}})]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("注意只能本机访问")])])])}),[],!1,null,null,null);t.default=e.exports}}]);