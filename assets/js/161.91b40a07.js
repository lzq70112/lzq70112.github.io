(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{631:function(s,t,n){"use strict";n.r(t);var a=n(20),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("kvm的概述\n")]),s._v(" "),n("h2",{attrs:{id:"_1、kvm的安装基础环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、kvm的安装基础环境"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、KVM的安装基础环境")])]),s._v(" "),n("p",[s._v("现实环境准备")]),s._v(" "),n("p",[s._v("CentOS7.3DVD镜像下载地址：http://man.linuxde.net/download/CentOS_7_3")]),s._v(" "),n("h3",{attrs:{id:"_1-1-、生产环境硬件配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-、生产环境硬件配置"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.1 、生产环境硬件配置")])]),s._v(" "),n("ul",[n("li",[s._v("CPU必须支持虚拟化技术，在BIOS设置为启动")]),s._v(" "),n("li",[s._v("目前，多数服务器基础桌面计算机均处理启动状态")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/lzq70112/images/blog/180330091735.png",alt:"img"}})]),s._v(" "),n("h3",{attrs:{id:"_1-2、虚拟化平台专用系统"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、虚拟化平台专用系统"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.2、虚拟化平台专用系统")])]),s._v(" "),n("p",[s._v("我们需要先用虚拟机，然后在虚拟机里再用虚拟化，也就是嵌套虚拟化")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("VMware 嵌套虚拟化")])]),s._v(" "),n("li",[n("ul",[n("li",[n("p",[s._v("产品：Workstation，Player，ESXi")])]),s._v(" "),n("li",[n("p",[s._v("支持：ESXi，Hyper-V，KVM，Xen")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/lzq70112/images/blog/image-20210927193435738.png",alt:"image-20210927193435738"}})])])])])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/lzq70112/images/blog/180330092445.png",alt:"img"}})]),s._v(" "),n("p",[s._v("装机时虚拟机需要安装如下软件")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/lzq70112/images/blog/180330094613.png",alt:"img"}})]),s._v(" "),n("h3",{attrs:{id:"_1-3、虚拟化平台非专用系统安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、虚拟化平台非专用系统安装"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.3、虚拟化平台非专用系统安装")])]),s._v(" "),n("p",[n("code",[s._v("cat /proc/cpuinfo |grep vmx //查看cpu是否支持虚拟化")])]),s._v(" "),n("h2",{attrs:{id:"_2、安装kvm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装kvm"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、安装KVM")])]),s._v(" "),n("p",[n("code",[s._v("yum -y install qemu-kvm-tools.x86_64 qemu-kvm.x86_64 libvirt-daemon-kvm.x86_64")])]),s._v(" "),n("p",[n("code",[s._v("yum install *qemu* *virt* *kvm* -y")]),s._v(" #全安装如果出现一些错误")]),s._v(" "),n("p",[n("code",[s._v('yum -y groups install "GNOME Desktop"')]),s._v("#安装桌面环境")]),s._v(" "),n("p",[s._v("完整安装")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("yum -y groupinstall "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GNOME Desktop"')]),s._v("          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装GNOME桌面环境")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" qemu-kvm               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#KVM模块")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" qemu-kvm-tools             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#KVM调试工具，可不安装")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virt-install                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#构建虚拟机的命令行工具")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" qemu-img          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#qemu组件，创建磁盘、启动虚拟机等")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" bridge-utils               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#网络支持工具")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libvirt                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#虚拟机管理工具")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virt-manager             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#图形界面管理虚拟机")]),s._v("\n\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libguestfs-tools             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用来管理虚拟机磁盘格式 ")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -sf /lib/systemd/system/graphical.target /etc/systemd/system/default.target "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将系统默认运行的target更改为graphical.target，若不执行该命令，重启时可能会报错。")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看是否有virbr0的接口")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[n("code",[s._v("systemctl start libvirtd")]),s._v("#启动KVM程序")]),s._v(" "),n("p",[n("code",[s._v("systemctl enable libvirtd")]),s._v("#开机启动")])])}),[],!1,null,null,null);t.default=e.exports}}]);